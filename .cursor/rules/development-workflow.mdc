---
description:
globs:
alwaysApply: true
---
# Development Workflow Guide

## Environment Setup

1. **Use uv for package management**: This project uses [uv](mdc:https:/github.com/astral-sh/uv) instead of pip
   ```bash
   uv venv --python 3.13
   source .venv/bin/activate
   uv sync --all-extras
   ```

2. **Environment Configuration**: Copy [.env.example](mdc:.env.example) to `.env` and configure:
   - `API_KEY` - Your Tempo AI API key

## Running the Server

- **Manual Testing**: `mcp run src/tempoai_mcp_server/server.py`
- **Claude Desktop Integration**: Use `mcp install` command as documented in [README.md](mdc:README.md)

## Code Quality Checks

Before committing, ensure all three checks pass:

1. **Linting**: `ruff .` - Uses default ruff rules, config in [pyproject.toml](mdc:pyproject.toml)
2. **Type Checking**: `mypy src tests` - Static type analysis
3. **Testing**: `pytest` - Unit tests in [tests/](mdc:tests) directory

## Code Organization

- **MCP Tools**: Organized by domain in [src/tempoai_mcp_server/tools/](mdc:src/tempoai_mcp_server/tools) (workouts.py, events.py, wellness.py)
- **Server Entry**: [src/tempoai_mcp_server/server.py](mdc:src/tempoai_mcp_server/server.py) - FastMCP server that imports and registers tools
- **API Client**: HTTP communication in [src/tempoai_mcp_server/api/client.py](mdc:src/tempoai_mcp_server/api/client.py)
- **Utilities**: Helper functions in [src/tempoai_mcp_server/utils/](mdc:src/tempoai_mcp_server/utils)
- **API Communication**: `make_tempo_ai_request()` function handles all Tempo AI API calls
- **Error Handling**: Comprehensive HTTP error handling with user-friendly messages

## Adding New MCP Tools

1. Add the tool function to the appropriate file in [src/tempoai_mcp_server/tools/](mdc:src/tempoai_mcp_server/tools) (or create a new file if needed)
2. Create async function decorated with `@mcp.tool()` (tools register themselves via decorators)
3. Add proper type hints and docstrings
4. Use `make_tempo_ai_request()` for API calls
5. Add formatting utilities to [src/tempoai_mcp_server/utils/formatting.py](mdc:src/tempoai_mcp_server/utils/formatting.py) if needed
6. Export the tool in [src/tempoai_mcp_server/tools/__init__.py](mdc:src/tempoai_mcp_server/tools/__init__.py)
7. Write unit tests in [tests/](mdc:tests)

## Commit Guidelines

- Use concise commit messages
- Title PRs as `[tempoai-mcp-server] <brief description>`
- Ensure `ruff`, `mypy`, and `pytest` all pass
- Document manual testing steps in PR description
